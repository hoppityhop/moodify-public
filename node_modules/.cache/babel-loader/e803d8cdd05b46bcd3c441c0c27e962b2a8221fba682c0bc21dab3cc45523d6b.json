{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jmoga\\\\Documents\\\\GitHub\\\\moodify-public\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useRef, useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport Button from \"react-bootstrap/Button\";\nimport { Card, Container, Row } from \"react-bootstrap\";\nimport * as faceapi from \"face-api.js\";\nimport SongCard from \"./components/playlistTable/SongCard\";\nimport { makeDecision } from \"./helpers/decisions\";\nimport { type } from \"@testing-library/user-event/dist/type\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = \"6d0de60304354fedb5667d4673efdd41\";\nconst CLIENT_SECRET = \"b6358f2e564e4d10931ea62d63d06558\";\nfunction App() {\n  _s();\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [expressions, setExpressions] = useState([]);\n  const [start, setStart] = useState(false);\n  const [emotion, setEmotion] = useState(null);\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [tracks, setTracks] = useState([]);\n  const [isHover, setIsHover] = useState(false);\n  const handleMouseEnter = () => {\n    setIsHover(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHover(false);\n  };\n  useEffect(() => {\n    var authParams = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: \"grant_type=client_credentials&client_id=\" + CLIENT_ID + \"&client_secret=\" + CLIENT_SECRET\n    };\n    fetch(\"https://accounts.spotify.com/api/token\", authParams).then(result => result.json()).then(data => setAccessToken(data.access_token));\n  }, []);\n\n  // useEffect(() => {\n  //   search();\n  // }, [emotion]);\n\n  // const search = async () => {\n  //   console.log(\"before\", emotion);\n  //   var parameters = {\n  //     method: \"GET\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //       Authorization: \"Bearer \" + accessToken,\n  //     },\n  //   };\n  //   var ID = await fetch(\n  //     \"https://api.spotify.com/v1/search?q=\" + emotion + \"&type=track\",\n  //     parameters\n  //   )\n  //     .then(response => response.json())\n  //     .then(data => {\n  //       console.log(data);\n  //       setTracks(data.tracks.items);\n  //     });\n  // };\n\n  const loadModels = () => {\n    Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"), faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"), faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"), faceapi.nets.faceExpressionNet.loadFromUri(\"/models\")]).then(() => {\n      faceDetection();\n    });\n  };\n  const startVideo = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(currentStream => {\n      videoRef.current.srcObject = currentStream;\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n  const stopVideo = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: false\n    }).then(currentStream => {\n      videoRef.current.srcObject = currentStream;\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n  const averageAllEmotions = () => {\n    var angry = 0;\n    var happy = 0;\n    var sad = 0;\n    var neutral = 0;\n    var surprised = 0;\n    var fearful = 0;\n    var maxEmotionName = null;\n    // var disgusted = 0;\n    for (var i = 0; i < expressions.length; i++) {\n      angry += expressions[i][0];\n    }\n    angry /= expressions.length;\n    // console.log(\"angry\", angry);\n\n    for (var i = 0; i < expressions.length; i++) {\n      happy += expressions[i][1];\n    }\n    happy /= expressions.length;\n    // console.log(\"happy\", happy);\n\n    for (var i = 0; i < expressions.length; i++) {\n      sad += expressions[i][2];\n    }\n    sad /= expressions.length;\n    // console.log(\"sad\", sad);\n\n    for (var i = 0; i < expressions.length; i++) {\n      neutral += expressions[i][3];\n    }\n    neutral /= expressions.length;\n    // console.log(\"neutral\", neutral);\n\n    for (var i = 0; i < expressions.length; i++) {\n      surprised += expressions[i][4];\n    }\n    surprised /= expressions.length;\n    // console.log(\"surprised\", surprised);\n\n    for (var i = 0; i < expressions.length; i++) {\n      fearful += expressions[i][5];\n    }\n    fearful /= expressions.length;\n    // console.log(\"fearful\", fearful);\n    const emotions = {\n      sad: sad,\n      happy: happy,\n      angry: angry,\n      surprised: surprised,\n      fearful: fearful,\n      neutral: neutral\n    };\n    const maxEmotionValue = Math.max(...Object.values(emotions));\n    for (const x in emotions) {\n      if (emotions[x] === maxEmotionValue) {\n        maxEmotionName = x;\n        break;\n      }\n    }\n    console.log(\"maxEmotionName\", maxEmotionName);\n    console.log(\"maxEmotionName\", maxEmotionValue);\n    setEmotion(maxEmotionName);\n    setStart(false);\n    return {\n      maxName: maxEmotionName,\n      maxValue: maxEmotionValue\n    };\n  };\n  const faceDetection = async () => {\n    const faceDetectionInterval = setInterval(async () => {\n      const detections = await faceapi.detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n      canvasRef.current.innerHtml = faceapi.createCanvasFromMedia(videoRef.current);\n      faceapi.matchDimensions(canvasRef.current, {\n        width: 940,\n        height: 650\n      });\n      const resized = faceapi.resizeResults(detections, {\n        width: 940,\n        height: 650\n      });\n      // console.log(\"--------------------------------------------------------------------\");\n      // console.log(\"Happy\", detections.expressions.happy);\n      // console.log(\"Sad\", detections.expressions.sad);\n      // console.log(\"Neutral\", detections.expressions.neutral);\n      // console.log(\"Angry\", detections.expressions.angry);\n      // console.log(\"Surprised\", detections.expressions.surprised);\n      // console.log(\"Fearful\", detections.expressions.fearful);\n      // console.log(\"Disgusted\", detections.expressions.disgusted);\n      // console.log(\"--------------------------------------------------------------------\");\n      expressions.push([detections.expressions.angry, detections.expressions.happy, detections.expressions.sad, detections.expressions.neutral, detections.expressions.surprised, detections.expressions.fearful, detections.expressions.disgusted]);\n      // console.log((detections.expressions.angry + detections.expressions.happy + detections.expressions.sad + detections.expressions.neutral + detections.expressions.surprised + detections.expressions.fearful + detections.expressions.disgusted))\n      // console.log(detections);\n\n      faceapi.draw.drawDetections(canvasRef.current, resized);\n      faceapi.draw.drawFaceLandmarks(canvasRef.current, resized);\n      faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\n    }, 500);\n    setTimeout(async () => {\n      clearInterval(faceDetectionInterval);\n      const avg = averageAllEmotions();\n      console.log(\"average\", avg);\n      const songs = await makeDecision(avg.maxName);\n      console.log(\"song\", songs);\n      setTracks(songs);\n    }, 6000);\n  };\n  const startScan = () => {\n    setStart(true);\n    startVideo();\n    setEmotion(\"None\");\n    videoRef && loadModels();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        paddingBottom: 100\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          textAlign: \"center\",\n          color: \"#1DB954\"\n        },\n        children: \"MOODIFY\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), start ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app__video\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          crossOrigin: \"anonymous\",\n          ref: videoRef,\n          style: {\n            border: \"1px solid\",\n            borderImageSlice: 1,\n            borderWidth: \"10px\",\n            borderImageSource: \"linear-gradient(#00C853, #fff345)\",\n            width: \"940px\",\n            height: \"650px\"\n          },\n          autoPlay: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          width: \"940\",\n          height: \"650\",\n          className: \"app__canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignContent: \"center\",\n          display: \"flex\",\n          justifyContent: \"center\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: 200,\n            height: 50,\n            backgroundColor: isHover ? \"#32d16a\" : \"#1DB954\",\n            borderRadius: 50,\n            padding: \"auto\",\n            color: \"#fff\",\n            fontFamily: \"Ubuntu\",\n            scale: isHover ? \"1.1\" : \"1\",\n            transition: \"all .2s ease-in-out\"\n          },\n          onClick: startScan,\n          onMouseEnter: handleMouseEnter,\n          onMouseLeave: handleMouseLeave,\n          children: \"Start Scan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"#fff\",\n          fontFamily: \"Ubuntu\",\n          textAlign: \"center\"\n        },\n        children: [\"Emotion: \", emotion]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(SongCard, {\n        songs: tracks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"RtZGu7fvxcFR08YJenVGYKWzY7I=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useRef","useEffect","useState","Button","Card","Container","Row","faceapi","SongCard","makeDecision","type","jsxDEV","_jsxDEV","CLIENT_ID","CLIENT_SECRET","App","_s","videoRef","canvasRef","expressions","setExpressions","start","setStart","emotion","setEmotion","accessToken","setAccessToken","tracks","setTracks","isHover","setIsHover","handleMouseEnter","handleMouseLeave","authParams","method","headers","body","fetch","then","result","json","data","access_token","loadModels","Promise","all","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","faceDetection","startVideo","navigator","mediaDevices","getUserMedia","video","currentStream","current","srcObject","catch","err","console","error","stopVideo","averageAllEmotions","angry","happy","sad","neutral","surprised","fearful","maxEmotionName","i","length","emotions","maxEmotionValue","Math","max","Object","values","x","log","maxName","maxValue","faceDetectionInterval","setInterval","detections","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","innerHtml","createCanvasFromMedia","matchDimensions","width","height","resized","resizeResults","push","disgusted","draw","drawDetections","drawFaceLandmarks","drawFaceExpressions","setTimeout","clearInterval","avg","songs","startScan","className","children","style","paddingBottom","textAlign","color","fileName","_jsxFileName","lineNumber","columnNumber","crossOrigin","ref","border","borderImageSlice","borderWidth","borderImageSource","autoPlay","alignContent","display","justifyContent","backgroundColor","borderRadius","padding","fontFamily","scale","transition","onClick","onMouseEnter","onMouseLeave","_c","$RefreshReg$"],"sources":["C:/Users/jmoga/Documents/GitHub/moodify-public/src/App.js"],"sourcesContent":["import { useRef, useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport Button from \"react-bootstrap/Button\";\nimport { Card, Container, Row } from \"react-bootstrap\";\nimport * as faceapi from \"face-api.js\";\nimport SongCard from \"./components/playlistTable/SongCard\";\nimport { makeDecision } from \"./helpers/decisions\";\nimport { type } from \"@testing-library/user-event/dist/type\";\n\nconst CLIENT_ID = \"6d0de60304354fedb5667d4673efdd41\";\nconst CLIENT_SECRET = \"b6358f2e564e4d10931ea62d63d06558\";\n\nfunction App() {\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const [expressions, setExpressions] = useState([]);\n  const [start, setStart] = useState(false);\n  const [emotion, setEmotion] = useState(null);\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [tracks, setTracks] = useState([]);\n\n  const [isHover, setIsHover] = useState(false);\n  const handleMouseEnter = () => {\n    setIsHover(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHover(false);\n  };\n\n  useEffect(() => {\n    var authParams = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      body:\n        \"grant_type=client_credentials&client_id=\" +\n        CLIENT_ID +\n        \"&client_secret=\" +\n        CLIENT_SECRET,\n    };\n    fetch(\"https://accounts.spotify.com/api/token\", authParams)\n      .then(result => result.json())\n      .then(data => setAccessToken(data.access_token));\n  }, []);\n\n  // useEffect(() => {\n  //   search();\n  // }, [emotion]);\n\n  // const search = async () => {\n  //   console.log(\"before\", emotion);\n  //   var parameters = {\n  //     method: \"GET\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //       Authorization: \"Bearer \" + accessToken,\n  //     },\n  //   };\n  //   var ID = await fetch(\n  //     \"https://api.spotify.com/v1/search?q=\" + emotion + \"&type=track\",\n  //     parameters\n  //   )\n  //     .then(response => response.json())\n  //     .then(data => {\n  //       console.log(data);\n  //       setTracks(data.tracks.items);\n  //     });\n  // };\n\n  const loadModels = () => {\n    Promise.all([\n      faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\"),\n      faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\"),\n      faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\"),\n      faceapi.nets.faceExpressionNet.loadFromUri(\"/models\"),\n    ]).then(() => {\n      faceDetection();\n    });\n  };\n\n  const startVideo = () => {\n    navigator.mediaDevices\n      .getUserMedia({ video: true })\n      .then(currentStream => {\n        videoRef.current.srcObject = currentStream;\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  };\n\n  const stopVideo = () => {\n    navigator.mediaDevices\n      .getUserMedia({ video: false })\n      .then(currentStream => {\n        videoRef.current.srcObject = currentStream;\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  };\n\n  const averageAllEmotions = () => {\n    var angry = 0;\n    var happy = 0;\n    var sad = 0;\n    var neutral = 0;\n    var surprised = 0;\n    var fearful = 0;\n    var maxEmotionName = null;\n    // var disgusted = 0;\n    for (var i = 0; i < expressions.length; i++) {\n      angry += expressions[i][0];\n    }\n    angry /= expressions.length;\n    // console.log(\"angry\", angry);\n\n    for (var i = 0; i < expressions.length; i++) {\n      happy += expressions[i][1];\n    }\n    happy /= expressions.length;\n    // console.log(\"happy\", happy);\n\n    for (var i = 0; i < expressions.length; i++) {\n      sad += expressions[i][2];\n    }\n    sad /= expressions.length;\n    // console.log(\"sad\", sad);\n\n    for (var i = 0; i < expressions.length; i++) {\n      neutral += expressions[i][3];\n    }\n    neutral /= expressions.length;\n    // console.log(\"neutral\", neutral);\n\n    for (var i = 0; i < expressions.length; i++) {\n      surprised += expressions[i][4];\n    }\n    surprised /= expressions.length;\n    // console.log(\"surprised\", surprised);\n\n    for (var i = 0; i < expressions.length; i++) {\n      fearful += expressions[i][5];\n    }\n    fearful /= expressions.length;\n    // console.log(\"fearful\", fearful);\n    const emotions = {\n      sad: sad,\n      happy: happy,\n      angry: angry,\n      surprised: surprised,\n      fearful: fearful,\n      neutral: neutral,\n    };\n    const maxEmotionValue = Math.max(...Object.values(emotions));\n    for (const x in emotions) {\n      if (emotions[x] === maxEmotionValue) {\n        maxEmotionName = x;\n        break;\n      }\n    }\n    console.log(\"maxEmotionName\", maxEmotionName);\n    console.log(\"maxEmotionName\", maxEmotionValue);\n    setEmotion(maxEmotionName);\n    setStart(false);\n    return {\n      maxName: maxEmotionName,\n      maxValue: maxEmotionValue,\n    };\n  };\n\n  const faceDetection = async () => {\n    const faceDetectionInterval = setInterval(async () => {\n      const detections = await faceapi\n        .detectSingleFace(\n          videoRef.current,\n          new faceapi.TinyFaceDetectorOptions()\n        )\n        .withFaceLandmarks()\n        .withFaceExpressions();\n\n      canvasRef.current.innerHtml = faceapi.createCanvasFromMedia(\n        videoRef.current\n      );\n      faceapi.matchDimensions(canvasRef.current, {\n        width: 940,\n        height: 650,\n      });\n\n      const resized = faceapi.resizeResults(detections, {\n        width: 940,\n        height: 650,\n      });\n      // console.log(\"--------------------------------------------------------------------\");\n      // console.log(\"Happy\", detections.expressions.happy);\n      // console.log(\"Sad\", detections.expressions.sad);\n      // console.log(\"Neutral\", detections.expressions.neutral);\n      // console.log(\"Angry\", detections.expressions.angry);\n      // console.log(\"Surprised\", detections.expressions.surprised);\n      // console.log(\"Fearful\", detections.expressions.fearful);\n      // console.log(\"Disgusted\", detections.expressions.disgusted);\n      // console.log(\"--------------------------------------------------------------------\");\n      expressions.push([\n        detections.expressions.angry,\n        detections.expressions.happy,\n        detections.expressions.sad,\n        detections.expressions.neutral,\n        detections.expressions.surprised,\n        detections.expressions.fearful,\n        detections.expressions.disgusted,\n      ]);\n      // console.log((detections.expressions.angry + detections.expressions.happy + detections.expressions.sad + detections.expressions.neutral + detections.expressions.surprised + detections.expressions.fearful + detections.expressions.disgusted))\n      // console.log(detections);\n\n      faceapi.draw.drawDetections(canvasRef.current, resized);\n      faceapi.draw.drawFaceLandmarks(canvasRef.current, resized);\n      faceapi.draw.drawFaceExpressions(canvasRef.current, resized);\n    }, 500);\n\n    setTimeout(async () => {\n      clearInterval(faceDetectionInterval);\n      const avg = averageAllEmotions();\n      console.log(\"average\", avg);\n      const songs = await makeDecision(avg.maxName);\n      console.log(\"song\", songs);\n      setTracks(songs);\n    }, 6000);\n  };\n\n  const startScan = () => {\n    setStart(true);\n    startVideo();\n    setEmotion(\"None\");\n\n    videoRef && loadModels();\n  };\n  return (\n    <div className=\"app\">\n      <div style={{ paddingBottom: 100 }}>\n        <h1 style={{ textAlign: \"center\", color: \"#1DB954\" }}>MOODIFY</h1>\n        {start ? (\n          <div className=\"app__video\">\n            <video\n              crossOrigin=\"anonymous\"\n              ref={videoRef}\n              style={{\n                border: \"1px solid\",\n                borderImageSlice: 1,\n                borderWidth: \"10px\",\n                borderImageSource: \"linear-gradient(#00C853, #fff345)\",\n                width: \"940px\",\n                height: \"650px\",\n              }}\n              autoPlay\n            ></video>\n            <canvas\n              ref={canvasRef}\n              width=\"940\"\n              height=\"650\"\n              className=\"app__canvas\"\n            />\n          </div>\n        ) : (\n          <div\n            style={{\n              alignContent: \"center\",\n              display: \"flex\",\n              justifyContent: \"center\",\n            }}\n          >\n            <button\n              style={{\n                width: 200,\n                height: 50,\n                backgroundColor: isHover ? \"#32d16a\" : \"#1DB954\",\n                borderRadius: 50,\n                padding: \"auto\",\n                color: \"#fff\",\n                fontFamily: \"Ubuntu\",\n                scale: isHover ? \"1.1\" : \"1\",\n                transition: \"all .2s ease-in-out\",\n              }}\n              onClick={startScan}\n              onMouseEnter={handleMouseEnter}\n              onMouseLeave={handleMouseLeave}\n            >\n              Start Scan\n            </button>\n          </div>\n        )}\n        <p style={{ color: \"#fff\", fontFamily: \"Ubuntu\", textAlign: \"center\" }}>\n          Emotion: {emotion}\n        </p>\n      </div>\n      <div>\n        <SongCard songs={tracks} />\n        {/* <Container>\n          <Row className=\"mx-2 row row-cols-4\">\n            {tracks.map((track, i) => {\n              return (\n                <Card>\n                  <Card.Img src={track.album.images[0].url} />\n                  <Card.Body>\n                    <Card.Title>{track.name}</Card.Title>\n                  </Card.Body>\n                </Card>\n              );\n            })}\n          </Row>\n        </Container> */}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}